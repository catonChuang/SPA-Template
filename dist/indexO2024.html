<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>巴黎奧運網路監視</title>
  	<link rel="dns-prefetch" href="//fonts.googleapis.com">
  	<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&display=swap">
  	<script src="js/jquery.min.js"></script>
	<script src="bootstrapV4/js/bootstrap.min.js"></script>	
	<link href="bootstrapV4/css/bootstrap.min.css" rel="stylesheet">  
	<link href="argusApp.css" rel="stylesheet">  
	<script src="js/argus.app.js"></script>
  <style type="text/css">
		
  </style>
</head>
<body>
	<div class="I-Body">
		<div class="row" style="padding-right: 10px;padding-left: 10px;" >
			<div class="col-sm-8">
				<div><b style="font-size: 24px;">巴黎奧運網路監視</b>&nbsp;<a href="#" onclick="showRule()"><span class="glyphicon glyphicon-info-sign titleicon" style="font-size: 20px;"  ></span></a></div>
			</div>
			<div class="col-sm-4">
				<table class="item-right">
							<tr><td>
							<div id="qrytime" style = "padding-top:5px"><b>呈現時間:</b>&nbsp;<span id="refreshTime">讀取中...</span></div>		
							</td></tr>
					</table>	
			</div>	
		</div>
		<div class="row">
			<div class="col-sm-12">	
				<div class="card">
					<iframe id="iframeTK" src="topy/Paris2024/topo.html" frameborder="0" height="403px" width="100%" scrolling="no"></iframe>
				</div>	
				<div class="card">	
					<div class="card-header bgBlue">
						<b>DDOS監測</b>
					</div>		
					<div class="card-body" style="padding: 5px;">
						<table class="table-striped" style="margin-bottom:1px; width:100% "><tbody>		
							<tr align="center">								
								<td >Hami網站</td>
								<td >ELTA網站</td>
								<td >Hami域名解析</td>
								<td >外雲(南二)</td>
							</tr>	
							<tr align="center">
								<td ><a href="#" onclick="getResult('DDOS_HAMI')"><img id="imgDDOS_HAMI" src="img/light2/01.png" class="statusIcon" ></a></td>
								<td ><a href="#" onclick="getResult('DDOS_ELTA')"><img id="imgDDOS_ELTA" src="img/light2/01.png" class="statusIcon" ></a></td>
								<td ><a href="#" onclick="getCamera()"><img id="imgDDOS_HAMI_DNS" src="img/light2/01.png" class="statusIcon" ></a></td>
								<td ><a href="#" onclick="getResult('DDOS_CLOUD_TPS2')"><img id="imgDDOS_CLOUD_TPS2" src="img/light2/01.png" class="statusIcon" ></a></td>
							</tr>
						</tbody></table>	
					</div>	
				</div>	
			</div>	
		</div>

		<div class="row  customLabel">
			<div class="col-3" >
				<table>
					<tr align="center" style="vertical-align: middle; height:60px " class="kindTitle">
					<td>
						<h3 style="padding-top: 8px;"><a href="#" class="badge badge-secondary" style="background: #4070B1;" onclick="openNext('0')">網路<br>拓樸</a></h3>
					</td>
					</tr>
				</table>
			</div>
			<div class="col-3" >
				<table>
					<tr align="center" style="vertical-align: middle; height:60px " class="kindTitle">
					<td>
						<h3 style="padding-top: 8px;"><a href="#" class="badge badge-secondary" style="background: #4070B1;" onclick="openNext('1')">服務<br>狀態
						</a></h3>
					</td>
					</tr>
				</table>
			</div>
			<div class="col-3" >
				<table>
					<tr align="center" style="vertical-align: middle; height:60px " class="kindTitle">
							<td>
							<h3 style="padding-top: 8px;"><a href="#" class="badge badge-secondary" style="background: #4070B1;" onclick="openNext('2')">收視<br>指標</a></h3>
							</td>
					</tr>
				</table>
			</div>
			<div class="col-3" >
				<table>
					<tr align="center" style="vertical-align: middle; height:60px " class="kindTitle">
							<td>
							<h3 style="padding-top: 8px;"><a href="#" class="badge badge-secondary" style="background: #4070B1;" onclick="openNext('3')">ISP<br>互連<br></a></h3>
							</td>
					</tr>
				</table>
			</div>
		</div>
	</div>
</body>
</html>

<script>
	var refreshSecond = 30;						// 30 秒
	var refreshTime = refreshSecond;			
	var isReLoad = false;

	//==============================
	// 初始呼叫
	//==============================
	$(document).ready(function() {
		refreshTime = 1;	// 設1預設才會run
		changeRefreshTime();
		pageRefresh();
	}); 


	function changeRefreshTime(){
		refreshTime = refreshSecond;
		$('#refreshTime').html(getNowTime());
	}	

	//==============================
	// 更新時間
	//==============================
	function pageRefresh(){
		refreshTime -= 1;	
		if (refreshTime==0){
				refreshContent();
				//_PictureQualityCount++;
				//if(_PictureQualityCount%2==0)
				//	loadPictureQuality();
				//if(_PictureQualityCount>10000)
				//	_PictureQualityCount =0;
		}else{			
		}
		cleartime = setTimeout("pageRefresh()",1000);
	}

	//==============================
	// 更新內容
	//==============================
	function refreshContent(){
		changeRefreshTime();
	}


	var db;
		function indexDB() {
			// In the following line, you should include the prefixes of implementations you want to test.
window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
// DON'T use "var indexedDB = ..." if you're not in a function.
// Moreover, you may need references to some window.IDB* objects:
window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction;
window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;
// (Mozilla has never prefixed these objects, so we don't need window.mozIDB*)
			if (!window.indexedDB) {
    window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");
} else {
const customerData = [
  { ssn: "444-44-4444", name: "Bill", age: 35, email: "bill@company.com" },
  { ssn: "555-55-5555", name: "Donna", age: 32, email: "donna@home.org" }
];
const dbName = "the_name";

var request = window.indexedDB.open(dbName, 2);

request.onerror = function(event) {
  // Handle errors.
};
request.onupgradeneeded = function(event) {
  db = event.target.result;

  // Create an objectStore to hold information about our customers. We're
  // going to use "ssn" as our key path because it's guaranteed to be
  // unique.
  var objectStore = db.createObjectStore("customers", { keyPath: "ssn" });

  // Create an index to search customers by name. We may have duplicates
  // so we can't use a unique index.
  objectStore.createIndex("name", "name", { unique: false });

  // Create an index to search customers by email. We want to ensure that
  // no two customers have the same email, so use a unique index.
  objectStore.createIndex("email", "email", { unique: true });

  // Store values in the newly created objectStore.
  for (var i in customerData) {
    objectStore.add(customerData[i]);
  }
};
}
		}
		function readDB() {
			var transaction = db.transaction(["customers"]);
var objectStore = transaction.objectStore("customers");
var request = objectStore.get("444-44-4444");
request.onerror = function(event) {
  // Handle errors!
};
request.onsuccess = function(event) {
  // Do something with the request.result!
  alert("Name for SSN 444-44-4444 is " + request.result.name);
};
		}

		function saveToStorage() {
            //window.localStorage.setItem("UserData", inputArea.value);
            //localStorage.setItem("UserData", inputArea.value);
            //localStorage["UserData"] = inputArea.value;
            localStorage.UserData = "aaaa";
            sessionStorage.UserData = "bbbb";
        }

        function loadFromLocalStorage() {
            alert(localStorage["UserData"]);
        }

        function loadFromSessionStorage() {
            alert(sessionStorage["UserData"]);
        }
        function useBiometrics() {
        	var myObj = { "cmd": "useBiometrics"};
            callAppCmd(JSON.stringify(myObj));
        }
        function nmoss() {
        	var cmd=`{"cmd": "rest","value":{
			"id": "rest1", // 用 id 區分 request 是何者發送的，之後 response 時會以同樣的 id 去區分
			"restConfig": {
			  "name": "NMOSS", // api 名稱
			  "body": "0000,830421,mario", // 參數
			  "headers": { "Content-Type": "application/json" }, // 標頭
			  "method": "POST"

			}
		  }}`;
        	callAppCmd(cmd);
        }
		function getPushNoti(){
			var myObj = { "cmd": "getPushNoti"};
			callAppCmd(JSON.stringify(myObj));
		}
		function appRefresh(){
            var myObj = { "cmd": "appRefresh"};
            callAppCmd(JSON.stringify(myObj));
        }
		
		function setNotiViewed(){
			var myObj = { "cmd": "setNotiViewed", "value":{"id": "4f6e493e-a4d6-46ad-ab06-7925dd4255b0"}};
			callAppCmd(JSON.stringify(myObj));
		}
		function openUrl(){
			var myObj = { "cmd": "openCamera", "value":{"type": "openUrl"}};
			callAppCmd(JSON.stringify(myObj));
		}
		function closeCamera(){
			var myObj = { "cmd": "closeCamera"};
			callAppCmd(JSON.stringify(myObj));
		}
		function getCamera(){
			var myObj = { "cmd": "openCamera", "value":{"id": "takePhoto", "type": "takePhoto"}};
			callAppCmd(JSON.stringify(myObj));
		}
		function pickFileAlbum(){
			var myObj = { "cmd": "pickFile", "value":{"type":"album", "count":10}};
			callAppCmd(JSON.stringify(myObj));
		}
		function pickFileDoc(){
			var myObj = { "cmd": "pickFile", "value":{"type":"document", "count":5}};
			callAppCmd(JSON.stringify(myObj));
		}
		function pickFileAll(){
			var myObj = { "cmd": "pickFile", "value":{"type":"all", "count":5}};
			callAppCmd(JSON.stringify(myObj));
		}
		function speech(){
			var myObj = { "cmd": "speechRecognize"};
			callAppCmd(JSON.stringify(myObj));
		}
		function cancelSpeech(){
            var myObj = { "cmd": "cancelSpeechRecognize"};
            callAppCmd(JSON.stringify(myObj));
        }
		function getRestNew_(){
			var myObj = { "cmd": "rest", "value":{"id": "rest1", "restConfig": {"name":"echo.base","body":myObj1,"relativePath":'/api/v1/echo',"method":"POST"}}};
			callAppCmd(JSON.stringify(myObj));
		}
		function getRestNew(){
			//var myObj = { "cmd": "rest", "value":{"id": "rest1", "restConfig": {"name":"Duty","relativePath":'/EmpID/831765/GetHomeInfoByEmp',"method":"GET", "body":{"test":"aaa","a":"bb"}}}};
			//var myObj = { "cmd": "rest", "value":{"id": "rest1", "restConfig": {"name":"apis.spa.qa.ex","method":"GET"}}};
			var myObj = { "cmd": "rest", "value":{"id": "rest1", "restConfig": {"name":"photo","relativePath":'/831765',"method":"GET"}}};
			var str = callAppCmd(JSON.stringify(myObj));

		}
		function callAppCmd (params) {			
			if (window.webkit != undefined) {
				// for iOS
				window.webkit.messageHandlers.callAppCmd.postMessage (params);
				return undefined;
			  } else {
				// for Android
				window.android.callAppCmd(params);
			  }
		 }
		function appCmdCallback(str){
			alert("appCmdCallback: " + str);
			var obj = JSON.parse(str);
			if (obj.cmd!='pickFile') {
				alert(obj.value.data);
				document.getElementById('img').src=obj.value.data;
			} else {
			//alert(obj.value.apis[0].url);
			//alert(obj(obj.value.data));
			//document.getElementById('img').src="data:image/jpeg;base64," + btoa(obj.value.data);
			//document.getElementById('img').src=obj.value.data;
				for(var i=1;i<=obj.value.length;i++) {
					//alert(obj.value[i-1].name);
					document.getElementById('img'+i).src=obj.value[i-1].data;
				}
			}
			//alert("aaa");
			//alert(obj.value.photo);
			//document.getElementById('img').src=obj.value.photo;
		}
		function getGPS(){
			var myObj = { "cmd": "retrieveGeolocation", "value": null};
			var str = callAppCmd(JSON.stringify(myObj));
			//alert(str);
		}
		
		function getAuthNew(){
			var myObj = { "cmd": "postAuth", "value": null};
			var str = callAppCmd(JSON.stringify(myObj));
		}
		function dialPhoneNumber(){
			var myObj = { "cmd": "dial", "value": {"number":"0988170521"}};
			var str = callAppCmd(JSON.stringify(myObj));
		}
		function teams(){
			var myObj = { "cmd": "teams", "value": {"mail":"sylvie@cht.com.tw"}};
			var str = callAppCmd(JSON.stringify(myObj));
		}
		function goApp(){
			var myObj = { "cmd": "goApp", "value": "com.cht.eip"};//hrm-whs
			var str = callAppCmd(JSON.stringify(myObj));
		}
		function goAppArg(){
            var myObj = { "cmd": "goApp", "value":{ "appId":"com.cht.test","data":{"messageId":"3cfabc1f-683e-4d95-a62b-95f8192a4452_1"}}};//hrm-whs
            var str = callAppCmd(JSON.stringify(myObj));
        }
		function getAppConfig(){
			var str = window.JavaScriptInterface.callAppCmd('appConfig','com.cht.hrm-whs', 'getRestRes', null);
			//alert(str);
		}
		function reAuth(){
			var str = window.JavaScriptInterface.callAppCmd('postAuth','com.tripim.ictinv', 'getRestRes', null);
			//alert(str);
		}
		function getUserInfo(){
			var str = window.JavaScriptInterface.callAppCmd('userInfo','myPayloadUser', 'getRestRes', null);
			//alert(str);
		}
		function getAppList(){
			//null
			var str = window.JavaScriptInterface.callAppCmd('appList','myPayloadAppList', 'getRestRes', null);
			//alert(str);
			//0 ele
// <!--			window.JavaScriptInterface.callAppCmd('appList','myPayloadAppList2',[]);-->
// <!--			//null-->
// <!--			window.JavaScriptInterface.callAppCmd('appList','myPayloadAppList3','');-->
// <!--			//first 2 ele null-->
// <!--			window.JavaScriptInterface.callAppCmd('appList','myPayloadAppList4',[1,2,3,4]);-->
// <!--			//1, and 2 more ele null-->
// <!--			window.JavaScriptInterface.callAppCmd('appList','myPayloadAppList5',['1',2,3,4]);-->
// <!--			//1, null, 3, null, 5-->
// <!--			window.JavaScriptInterface.callAppCmd('appList','myPayloadAppList6',['1',2,'3',4,'5']);-->
		}
		function getWebView(){
			location.href = 'https://spa-template.azurewebsites.net/#/CHTAppCmdDemo';
			//window.JavaScriptInterface.callAppCmd('webView','https://www.google.com.tw',null);
			//window.JavaScriptInterface.callAppCmd('webView','http://spa-template.azurewebsites.net/#/CHTAppCmdDemo', null, null);
		}
		function getRest(){
			var myObj = {'a':'234', 'b':'456'};
			//window.JavaScriptInterface.callAppCmd('rest','com.cht.mportal', 'getRestRes', ['echo.base', 'GET', null, null, JSON.stringify(myObj), '/api/v1/echo']);

			//alert(JSON.stringify(myObj));
			window.JavaScriptInterface.callAppCmd('rest','com.cht.mportal', 'getRestRes', ['apis.spa.qa.ex', 'GET', null, null, null, null]);

			//var myObj = {'content-type':'application/json'};
			//var myObj2 = {"cmd": "getStaffInfo", "staff": "829782"};
			//window.JavaScriptInterface.callAppCmd('rest','com.cht.force', ['force.qa.ex', 'getRestRes', 'POST', JSON.stringify(myObj), JSON.stringify(myObj2), null, '/forceapp/api/force/getworksheet']);
		}
		function getAuth(){
			window.JavaScriptInterface.callAppCmd('postAuth', 'com.cht.mportal', 'getRestRes', null);
		}
		function getDefault(){
			window.JavaScriptInterface.callAppCmd('anything','myPayloadDefault', 'getRestRes', ['1','2','3','asdfgh']);
		}
		function getFail(){
			window.JavaScriptInterface.callAppCmd('appList','');
		}
		function getResult(str){
			alert("getResult: " + str);
			//var obj = JSON.parse(str);
			//alert(obj['cmd'] + ' ~ ' + obj['res']);
		}
		function getRestRes(str){
			alert("getRestRes:" + str);
			//var obj = JSON.parse(str);
			//alert('getRestRes: ' + obj['cmd'] + ' ~ ' + obj['resCode'] + ' ~ ' + obj['name'] + ' ~ ' + obj['result']);
		}
	</script>